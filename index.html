<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>School Alumni — Home</title>
  <meta name="description" content="Alumni site: join, view gallery, contact the alumni office." />
  <style>
    :root{
      --accent:#2b6cb0;
      --accent-2:#1e40af;
      --muted:#6b7280;
      --bg:#f8fafc;
      --card-bg:#ffffff;
      --radius:12px;
      --shadow:0 6px 18px rgba(2,6,23,.06);
      --max-width:1000px;
      --gap:20px;
      font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial, sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:#0f172a;font-family:inherit;line-height:1.45;-webkit-font-smoothing:antialiased}
    a{color:inherit}
    header{background:var(--card-bg);box-shadow:0 1px 6px rgba(2,6,23,.06);position:sticky;top:0;z-index:50}
    .container{max-width:var(--max-width);margin:0 auto;padding:20px}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{font-weight:800;color:var(--accent);font-size:1.15rem}
    .nav-links{display:flex;gap:14px}
    .nav-links a{color:var(--muted);text-decoration:none;padding:8px;border-radius:8px}
    .nav-links a:hover{background:rgba(43,108,176,.06);color:var(--accent-2)}

    main{padding:28px 0}

    /* Hero */
    .hero{background:var(--card-bg);border-radius:var(--radius);padding:28px;display:grid;grid-template-columns:1fr 320px;gap:20px;align-items:start;box-shadow:var(--shadow)}
    .hero h1{margin:0 0 8px 0;font-size:1.6rem}
    .hero p{margin:0;color:var(--muted)}
    .announcement{background:#f1f5f9;border-left:4px solid var(--accent);padding:12px;border-radius:8px;margin-top:14px}

    /* Grid sections */
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:20px}
    section.card{background:var(--card-bg);border-radius:var(--radius);padding:18px;box-shadow:0 1px 6px rgba(2,6,23,.04)}
    section.card h2{margin:0 0 8px 0;font-size:1.05rem}

    /* Form */
    label{display:block;font-size:.95rem;margin-bottom:6px}
    input[type=text],input[type=email],input[type=number],select,textarea{width:100%;padding:10px;border:1px solid #e6e9ef;border-radius:8px;font-size:.95rem}
    .row{display:flex;gap:12px}
    .row > *{flex:1}
    button{background:var(--accent);color:white;border:0;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:600}
    button[aria-pressed="true"]{opacity:.9}
    button:disabled{opacity:.6;cursor:not-allowed}
    .muted{color:var(--muted);font-size:.9rem}

    /* gallery */
    .gallery-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px}
    .thumb{background:#eef2f7;border-radius:8px;overflow:hidden;position:relative;height:120px;display:flex;align-items:center;justify-content:center;cursor:pointer}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .gallery-drop{border:2px dashed rgba(43,108,176,.12);padding:12px;border-radius:8px;text-align:center;color:var(--muted);transition:background .15s,border-color .15s}
    .gallery-drop.dragover{background:rgba(43,108,176,.03);border-color:var(--accent)}

    /* contact */
    .contact-info p{margin:.25rem 0}

    /* footer */
    footer{padding:18px 0;color:var(--muted);text-align:center;margin-top:24px}

    /* mini alumni */
    .mini-list img{width:48px;height:48px;border-radius:8px;object-fit:cover}
    .mini-list .entry{display:flex;gap:8px;align-items:center;margin-bottom:8px}

    /* lightbox */
    .lightbox{position:fixed;inset:0;background:rgba(2,6,23,.7);display:flex;align-items:center;justify-content:center;padding:20px;z-index:60;opacity:0;pointer-events:none;transition:opacity .18s}
    .lightbox.show{opacity:1;pointer-events:auto}
    .lightbox img{max-width:90%;max-height:80%;border-radius:8px;box-shadow:0 10px 40px rgba(2,6,23,.6)}

    /* small screens */
    @media (max-width:900px){
      .hero{grid-template-columns:1fr}
      .grid{grid-template-columns:1fr}
      .hero aside{order:-1}
    }

    @media (max-width:440px){
      .row{flex-direction:column}
    }

    /* subtle focus */
    :focus{outline:3px solid rgba(43,108,176,.12);outline-offset:2px}
  </style>
</head>
<body>
  <header>
    <div class="container nav" role="banner">
      <div class="brand">Your School Alumni</div>
      <nav class="nav-links" role="navigation" aria-label="Main">
        <a href="#home">Home</a>
        <a href="#join">Join</a>
        <a href="#gallery">Gallery</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <main class="container" id="top">
    <!-- Home / Hero -->
    <section id="home" class="hero" aria-labelledby="heroTitle">
      <div>
        <h1 id="heroTitle">Welcome back, alumni!</h1>
        <p>Reconnect with classmates, share updates, and relive memories from past events. We’re glad you’re here.</p>

        <div class="announcement" id="announcements" aria-live="polite">
          <strong>Latest announcement:</strong>
          <div class="muted" id="announcementText">No announcements yet. Add news from the admin console or via JavaScript.</div>
        </div>

        <div id="heroActions" style="margin-top:14px;display:flex;gap:8px;">
          <a href="#join" role="button" style="background:var(--accent);color:white;padding:10px 14px;border-radius:8px;text-decoration:none;font-weight:600">Join the Directory</a>
          <a href="#gallery" role="button" style="border:1px solid #e6e9ef;padding:10px 14px;border-radius:8px;text-decoration:none;color:var(--muted)">View Gallery</a>
        </div>
      </div>

      <aside aria-label="Next reunion and recent members">
        <div style="text-align:center">
          <img src="https://via.placeholder.com/280x160.png?text=Reunion+Photo" alt="Group reunion photo" style="width:100%;border-radius:8px;display:block;margin-bottom:10px;">
          <div class="muted">Next reunion: <strong id="nextReunion">TBD</strong></div>
        </div>
        <!-- recent members (rendered via JS) -->
      </aside>
    </section>

    <div class="grid">
      <!-- Join / Sign Up -->
      <section id="join" class="card" aria-labelledby="joinTitle">
        <h2 id="joinTitle">Join / Sign Up</h2>
        <p class="muted">Enter your details to join the alumni directory.</p>
        <form id="signupForm" novalidate>
          <div class="row">
            <div>
              <label for="name">Full name</label>
              <input id="name" name="name" type="text" required placeholder="Jane Doe" aria-required="true">
            </div>
            <div>
              <label for="year">Graduation year</label>
              <input id="year" name="year" type="number" min="1900" max="2100" placeholder="2010">
            </div>
          </div>

          <label for="email">Email</label>
          <input id="email" name="email" type="email" required placeholder="you@example.com" aria-required="true">

          <label for="work">Workplace / current role <span class="muted">(optional)</span></label>
          <input id="work" name="work" type="text" placeholder="Company, Role">

          <label for="avatar">Profile picture <span class="muted">(optional - local preview only)</span></label>
          <input id="avatar" name="avatar" type="file" accept="image/*" aria-describedby="avatarHelp">
          <div id="avatarHelp" class="muted" style="margin-top:6px">Small preview shown. For production, upload to your server.</div>
          <div style="margin:8px 0" id="avatarPreview" aria-hidden="true"></div>

          <div style="display:flex;gap:8px;margin-top:10px">
            <button type="submit">Join</button>
            <button type="button" id="clearBtn" style="background:#94a3b8">Clear</button>
          </div>
          <p class="muted" style="margin-top:8px">This demo stores signups in your browser (localStorage). For real use, connect the form to your server and validate server-side.</p>
        </form>
      </section>

      <!-- Gallery / Memories -->
      <section id="gallery" class="card" aria-labelledby="galleryTitle">
        <h2 id="galleryTitle">Gallery / Memories</h2>
        <p class="muted">Share photos from past events. Drag & drop supported. (Demo stores images locally in your browser.)</p>

        <div style="margin:10px 0">
          <label for="galleryUpload">Add photo(s) to gallery</label>
          <input id="galleryUpload" type="file" accept="image/*" multiple>
        </div>

        <div id="dropZone" class="gallery-drop" tabindex="0" role="region" aria-label="Drop images here to add to the gallery">
          Drag & drop images here or use the file chooser above
        </div>

        <div class="gallery-grid" id="galleryGrid" style="margin-top:12px">
          <!-- thumbnails appended here -->
        </div>

      </section>

      <!-- Contact -->
      <section id="contact" class="card" aria-labelledby="contactTitle">
        <h2 id="contactTitle">Contact</h2>
        <div class="contact-info">
          <p><strong>Alumni Office</strong></p>
          <p>123 School Street, Hometown</p>
          <p>Email: <a href="mailto:alumni@yourschool.edu">alumni@yourschool.edu</a></p>
          <p>Phone: +1 (555) 555-5555</p>
        </div>

        <hr>
        <h3 style="margin-top:8px">Message the alumni office</h3>
        <form id="contactForm" novalidate>
          <label for="cname">Your name</label>
          <input id="cname" name="cname" type="text" required>
          <label for="cemail">Your email</label>
          <input id="cemail" name="cemail" type="email" required>
          <label for="cmsg">Message</label>
          <textarea id="cmsg" name="cmsg" rows="4" required></textarea>
          <div style="margin-top:8px;display:flex;gap:8px">
            <button type="submit">Send</button>
            <button type="button" id="contactClear" style="background:#94a3b8">Clear</button>
          </div>
          <p class="muted" style="margin-top:8px">Note: this demo doesn't send emails — it shows how you'd collect the message. Connect to an email service or server endpoint to actually deliver messages.</p>
        </form>
      </section>

    </div> <!-- end grid -->

    <footer>
      © <span id="yearNow"></span> Your School Alumni · Built with ❤️
    </footer>
  </main>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-hidden="true" tabindex="-1">
    <button id="lightboxClose" style="position:absolute;top:18px;right:18px;background:transparent;border:0;color:white;font-size:20px;cursor:pointer" aria-label="Close">&times;</button>
    <img id="lightboxImg" src="" alt="">
  </div>

  <script>
    // small helper utilities for demo-only local persistence
    const now = new Date();
    document.getElementById('yearNow').textContent = now.getFullYear();

    // announcements: replace dynamically or load from a CMS
    const announcements = [
      {date:'2025-11-01',text:'Reunion photos are live — check the gallery!'},
      {date:'2025-06-12',text:'Annual alumni meeting scheduled for December.'}
    ];
    const annEl = document.getElementById('announcementText');
    if(announcements.length) annEl.textContent = announcements[0].text;

    // next reunion sample
    document.getElementById('nextReunion').textContent = 'December 5, 2025';

    // ---------- SIGNUP form handling (localStorage demo) ----------
    const signupForm = document.getElementById('signupForm');
    const avatarInput = document.getElementById('avatar');
    const avatarPreview = document.getElementById('avatarPreview');

    function readImageFile(file){
      return new Promise((resolve, reject)=>{
        const r = new FileReader();
        r.onload = e => resolve(e.target.result);
        r.onerror = reject;
        r.readAsDataURL(file);
      });
    }

    avatarInput.addEventListener('change', async ()=>{
      const f = avatarInput.files[0];
      avatarPreview.innerHTML = '';
      if(!f) return;
      try{
        const data = await readImageFile(f);
        const img = document.createElement('img');
        img.src = data; img.style.maxWidth='80px'; img.style.borderRadius='8px';
        avatarPreview.appendChild(img);
      }catch(e){
        console.error('Failed to read avatar', e);
      }
    });

    signupForm.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const year = document.getElementById('year').value.trim();
      const email = document.getElementById('email').value.trim();
      const work = document.getElementById('work').value.trim();
      const avatarFile = avatarInput.files[0];

      if(!name || !email){
        alert('Please provide your name and email.');
        return;
      }

      const save = (avatarData)=>{
        const entry = {name,year,email,work,avatar:avatarData,joined: new Date().toISOString()};
        const list = JSON.parse(localStorage.getItem('alumni_list')||'[]');
        list.unshift(entry);
        localStorage.setItem('alumni_list', JSON.stringify(list.slice(0,500)));
        alert('Thanks — your info is saved locally. For real signups, connect to a server.');
        signupForm.reset(); avatarPreview.innerHTML='';
        renderAlumniPreviews();
      }

      if(avatarFile){
        try{
          const data = await readImageFile(avatarFile);
          save(data);
        }catch(e){
          console.error(e);
          save(null);
        }
      }else save(null);
    });

    document.getElementById('clearBtn').addEventListener('click', ()=>{signupForm.reset();avatarPreview.innerHTML='';});

    // ---------- Gallery handling (local-only demo) ----------
    const galleryInput = document.getElementById('galleryUpload');
    const galleryGrid = document.getElementById('galleryGrid');
    const dropZone = document.getElementById('dropZone');

    function addGalleryImages(images){
      const list = JSON.parse(localStorage.getItem('gallery')||'[]');
      list.unshift(...images);
      localStorage.setItem('gallery', JSON.stringify(list.slice(0,200)));
      renderGallery();
    }

    galleryInput.addEventListener('change', async ()=>{
      const files = Array.from(galleryInput.files).slice(0,24);
      const images = [];
      for(const f of files){
        try{
          const data = await readImageFile(f);
          images.push(data);
        }catch(e){
          console.warn('failed reading file', e);
        }
      }
      if(images.length) addGalleryImages(images);
      galleryInput.value = '';
    });

    // drag & drop
    ['dragenter','dragover'].forEach(ev=>{
      dropZone.addEventListener(ev, (e)=>{ e.preventDefault(); dropZone.classList.add('dragover'); });
    });
    ['dragleave','drop'].forEach(ev=>{
      dropZone.addEventListener(ev, (e)=>{ e.preventDefault(); if(ev === 'drop') handleDrop(e); dropZone.classList.remove('dragover'); });
    });
    function handleDrop(e){
      const items = Array.from(e.dataTransfer.files || []).filter(f=>f.type.startsWith('image/')).slice(0,24);
      if(!items.length) return;
      const readers = items.map(f => readImageFile(f));
      Promise.all(readers).then(results => addGalleryImages(results)).catch(err=>console.warn(err));
    }

    function renderGallery(){
      galleryGrid.innerHTML='';
      const list = JSON.parse(localStorage.getItem('gallery')||'[]');
      list.forEach((src, idx)=>{
        const d = document.createElement('div'); d.className='thumb'; d.tabIndex=0; d.setAttribute('role','button'); d.setAttribute('aria-label','Open image in lightbox');
        const img = document.createElement('img'); img.src = src; img.alt = `Gallery image ${idx+1}`;
        d.appendChild(img);
        d.addEventListener('click', ()=>openLightbox(idx));
        d.addEventListener('keypress', (ev)=>{ if(ev.key === 'Enter' || ev.key === ' ') openLightbox(idx); });
        galleryGrid.appendChild(d);
      });
    }

    // ---------- Lightbox ----------
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightboxImg');
    const lightboxClose = document.getElementById('lightboxClose');

    function openLightbox(index){
      const list = JSON.parse(localStorage.getItem('gallery')||'[]');
      if(!list || !list[index]) return;
      lightboxImg.src = list[index];
      lightboxImg.alt = 'Gallery full-size image';
      lightbox.classList.add('show');
      lightbox.setAttribute('aria-hidden','false');
      lightbox.focus();
    }

    function closeLightbox(){
      lightbox.classList.remove('show');
      lightbox.setAttribute('aria-hidden','true');
      lightboxImg.src = '';
    }
    lightboxClose.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', (e)=>{ if(e.target === lightbox) closeLightbox(); });
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeLightbox(); });

    // ---------- small preview of alumni (show avatars if provided) ----------
    function renderAlumniPreviews(){
      // show up to 4 most recent enrolled alumni in the hero aside area
      const list = JSON.parse(localStorage.getItem('alumni_list')||'[]');
      const aside = document.querySelector('.hero aside');
      const existing = aside.querySelector('.mini-list');
      if(existing) existing.remove();
      if(!list.length) return;
      const wrap = document.createElement('div'); wrap.className='mini-list'; wrap.style.marginTop='12px';
      list.slice(0,4).forEach(a=>{
        const el = document.createElement('div'); el.className='entry';
        const img = document.createElement('img');
        img.src = a.avatar || 'https://via.placeholder.com/80?text=Avatar';
        img.alt = `${a.name}'s avatar`;
        const txt = document.createElement('div'); txt.innerHTML = `<div style="font-weight:600">${escapeHtml(a.name)}</div><div class="muted" style="font-size:.85rem">${a.year || 'year N/A'}</div>`;
        el.appendChild(img); el.appendChild(txt); wrap.appendChild(el);
      });
      aside.appendChild(wrap);
    }

    // load demo placeholders into gallery if empty
    function loadDemoData(){
      if(!localStorage.getItem('gallery')){
        const sample = [
          'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=1',
          'https://images.unsplash.com/photo-1505751172876-fa1923c5c528?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=2',
          'https://images.unsplash.com/photo-1520975915437-3c8b4e20ef4b?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=3'
        ];
        localStorage.setItem('gallery', JSON.stringify(sample));
      }

      // sample alumni data for first-time visitors
      if(!localStorage.getItem('alumni_list')){
        const sampleAlumni = [
          {name:'Alex Morgan', year:'2012', email:'alex@example.com', avatar:'https://i.pravatar.cc/80?img=31', joined:new Date().toISOString()},
          {name:'Priya Singh', year:'2018', email:'priya@example.com', avatar:'https://i.pravatar.cc/80?img=12', joined:new Date().toISOString()}
        ];
        localStorage.setItem('alumni_list', JSON.stringify(sampleAlumni));
      }
    }

    // ---------- CONTACT form demo (local only) ----------
    const contactForm = document.getElementById('contactForm');
    contactForm.addEventListener('submit', e=>{
      e.preventDefault();
      const name = document.getElementById('cname').value.trim();
      const email = document.getElementById('cemail').value.trim();
      const msg = document.getElementById('cmsg').value.trim();
      if(!name || !email || !msg){
        alert('Please complete all fields.');
        return;
      }
      const messages = JSON.parse(localStorage.getItem('contact_messages')||'[]');
      messages.unshift({name,email,msg,date:new Date().toISOString()});
      localStorage.setItem('contact_messages', JSON.stringify(messages.slice(0,200)));
      alert('Message saved locally. Connect this form to an email or server to actually send messages.');
      contactForm.reset();
    });
    document.getElementById('contactClear').addEventListener('click', ()=>contactForm.reset());

    // helper: escape HTML for injection safety in demo
    function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

    // initial render
    loadDemoData(); renderGallery(); renderAlumniPreviews();

    // small helper: allow changing announcement via JS console for admins
    window.AlumniAdmin = {
      setAnnouncement(txt){
        if(!txt) return;
        announcements.unshift({date:new Date().toISOString().slice(0,10), text:txt});
        document.getElementById('announcementText').textContent = txt;
      },
      clearGallery(){ localStorage.removeItem('gallery'); renderGallery(); },
      clearAlumni(){ localStorage.removeItem('alumni_list'); renderAlumniPreviews(); }
    };
  </script>
</body>
</html>
